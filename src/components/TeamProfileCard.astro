---
import LinkedInIcon from './icons/LinkedIn.astro'
import GitHubIcon from './icons/GitHub.astro'
import TwitterIcon from './icons/Twitter.astro'

interface ProfileLinks {
    linkedin?: string
    twitter?: string
    github?: string
    portfolio?: string
}

interface Props {
    name: string
    role: string
    bio: string
    imageSrc: string | null
    imageAlt?: string
    links?: ProfileLinks
    affiliation: string
}

const { name, role, bio, imageSrc, imageAlt, links = {}, affiliation } = Astro.props as Props
const altText = imageAlt || `Photo de ${name} â€” ${role}`
---

<article class="card hover-lift h-full flex flex-col items-center text-center p-6">
    <div class="mb-4">
        {
            imageSrc ? (
                <img
                    src={imageSrc}
                    alt={altText}
                    class="rounded-full object-cover w-32 h-32 mx-auto mb-2"
                    width="128"
                    height="128"
                    loading="lazy"
                    decoding="async"
                />
            ) : (
                <div class="w-32 h-32 rounded-full bg-gray-100 flex items-center justify-center text-3xl font-bold text-gray-600 mb-2">
                    {name.charAt(0).toUpperCase()}
                </div>
            )
        }
        <p class="inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold bg-gray-100 text-gray-700">
            {affiliation}
        </p>
    </div>

    <header class="mb-3">
        <h3 class="text-lg font-semibold text-gray-900">{name}</h3>
        {role && <p class="text-sm text-gray-600">{role}</p>}
    </header>

    <p class="text-sm text-gray-700 mb-4">{bio}</p>

    {
        (links.linkedin || links.github || links.portfolio) && (
            <div class="mt-auto flex items-center justify-center gap-3">
                {links.linkedin && (
                    <a
                        href={links.linkedin}
                        target="_blank"
                        rel="noopener noreferrer nofollow"
                        aria-label={`Voir le profil LinkedIn de ${name}`}>
                        <LinkedInIcon height="1.25rem" width="1.25rem" />
                    </a>
                )}
                {links.twitter && (
                    <a
                        href={links.twitter}
                        target="_blank"
                        rel="noopener noreferrer nofollow"
                        aria-label={`Voir le profil Twitter de ${name}`}>
                        <TwitterIcon height="1.25rem" width="1.25rem" />
                    </a>
                )}
                {links.github && (
                    <a
                        href={links.github}
                        target="_blank"
                        rel="noopener noreferrer nofollow"
                        aria-label={`Voir le profil GitHub de ${name}`}>
                        <GitHubIcon height="1.25rem" width="1.25rem" />
                    </a>
                )}
                {links.portfolio && (
                    <a
                        href={links.portfolio}
                        target="_blank"
                        rel="noopener noreferrer nofollow"
                        class="text-xs font-medium underline"
                        aria-label={`Voir le portfolio de ${name}`}>
                        Portfolio
                    </a>
                )}
            </div>
        )
    }
</article>
